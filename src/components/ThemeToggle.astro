---
const script = `
  const btn = document.getElementById('theme-toggle');
  const root = document.documentElement;
  const setDark = (on) => { root.classList.toggle('dark', on); root.classList.toggle('light', !on); };
  const preferred = () => window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  // Set initial theme from localStorage, else system preference
  const saved = localStorage.getItem('theme');
  setDark(saved ? saved === 'dark' : true);
  btn?.addEventListener('click', () => {
    const next = root.classList.contains('dark') ? 'light' : 'dark';
    setDark(next === 'dark');
    localStorage.setItem('theme', next);
    const label = next === 'dark' ? 'Dark' : 'Light';
    btn.setAttribute('aria-label', 'Switch to ' + (next === 'dark' ? 'light' : 'dark') + ' theme');
  });
`;
---
<button id="theme-toggle" class="px-3 py-1 text-sm rounded border border-white/10 hover:border-white/30" aria-label="Toggle theme" title="Toggle theme">
  <span class="inline-block">Theme</span>
</button>
<script is:inline>
  {script}
</script>
